<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Silkscreen:wght@400;700&display=swap" rel="stylesheet">
    <title>Match Module</title>
    <link rel="stylesheet" href="./css/style.css">
</head>
<body>
  <div class="leaderboard-list" id="leaderboard_list">

  </div>
</body>

<script type="text/javascript">
class Leaderboard {
  #id;

  constructor()
  {
    this.#id = 0;
  }

    #createElement(tag, attributes = {}, ...children)
    {
        const element = document.createElement(tag);

        for(const [key, value] of Object.entries(attributes))
                element.setAttribute(key, value);

        for(const child of children)
            if(typeof child === 'string')
                element.appendChild(document.createTextNode(child));
            else
                element.appendChild(child);

        return element;
    }

    toggleScoreStore(id)
    {
        if (document.getElementById("ldb_info_" + id).style.marginTop == "90px") {
            document.getElementById("ldb_matchbox_" + id).style.background = "";
            document.getElementById("ldb_match_" + id).style.height = "94px";
            document.getElementById("ldb_info_" + id).style.marginTop = "60px";
        }
        else {
            document.getElementById("ldb_matchbox_" + id).style.background = "#222223";
            document.getElementById("ldb_match_" + id).style.height = "124px";
            document.getElementById("ldb_info_" + id).style.marginTop = "90px";
        }
    }

    addMatch(pseudo_playerA, pseudo_playerB, image_playerA, image_playerB, score, win, blockchain, ether_link)
    {

        const teamLeftImg = this.#createElement("img", {
            src: image_playerA,
            alt: pseudo_playerA,
            class: "team-logo"
        });

        const teamLeftName = this.#createElement("div",{
            class: "team-name",
        }, pseudo_playerA);

        const teamLeftDiv = this.#createElement("div", {
            class: "team team-left"
        }, teamLeftImg, teamLeftName);

        const scoreDiv = this.#createElement("div", {
            class: "score",
        }, score);

        const timeDiv = document.createElement("div");
        if (win)
        {
          timeDiv.className = "win-match press-start-2p-regular";
          timeDiv.textContent = "WIN";
        }
        else
        {
          timeDiv.className = "loose-match press-start-2p-regular";
          timeDiv.textContent = "LOOSE";
        }

        const matchInfoDiv = this.#createElement("div", {
            class: "match-info silkscreen-regular"
        }, scoreDiv, timeDiv);

        const teamRightImg = this.#createElement("img", {
            src: image_playerB,
            alt: pseudo_playerB,
            class: "team-logo"
        })

        const teamRightName = this.#createElement("div", {
            class: "team-name",
        }, pseudo_playerB);

        const teamRightDiv = this.#createElement("div", {
            class: "team team-right"
        }, teamRightImg, teamRightName);

        const matchModuleDiv = this.#createElement("div", {
            class: "match-module",
            id: "ldb_matchbox_"+this.#id,
            onclick: "leaderboard.toggleScoreStore('"+this.#id+"')"
        }, teamLeftDiv, matchInfoDiv, teamRightDiv)

        const logoBoxDiv = this.#createElement("a",{
            class: "logo-box"
        });

        const stored = this.#createElement("span", {
            class: "logo-text"
        }, " Match in");

        let ethLogoAttributes;
        if (blockchain)
        {
          logoBoxDiv.className += " clickable-logo";
          logoBoxDiv.href = ether_link;
          ethLogoAttributes = {
              src: "Ethereum%20Icon.svg",
              alt: "Etherum logo",
              class: "eth-logo"
          }
        }
        else
            ethLogoAttributes = {
              src: "database2.svg",
              alt: "Databse logo",
              class: "db-logo"
          }
        const ethLogoImg = this.#createElement("img", ethLogoAttributes);
        const logoDiv = this.#createElement("div", {
            class: "logo"
        });

        logoBoxDiv.appendChild(stored);
        logoBoxDiv.appendChild(ethLogoImg);
        logoBoxDiv.appendChild(logoDiv);

        const logoMainDiv = this.#createElement("div", {
            class: "logo-main animation-info",
            id: "ldb_info_"+this.#id
        }, logoBoxDiv);

        const matchDiv = this.#createElement("div", {
            class: "match animation-info unselectable",
            id: "ldb_match_"+this.#id
        }, matchModuleDiv, logoMainDiv);

        document.getElementById("leaderboard_list").appendChild(matchDiv);
        this.#id += 1;
    }
}

let leaderboard = new Leaderboard();
leaderboard.addMatch("Mathieu", "Louis", "mmorue.jpg", "loculy.jpg", "10-4", true, true, "");
leaderboard.addMatch("Mathieu", "Louis", "mmorue.jpg", "loculy.jpg", "4-10", false,true,  "");
leaderboard.addMatch("Mathieu", "Louis", "mmorue.jpg", "loculy.jpg", "10-8", true, false, "");
leaderboard.addMatch("Mathieu", "Louis", "mmorue.jpg", "loculy.jpg", "10-6", true, true, "");
leaderboard.addMatch("Mathieu", "Louis", "mmorue.jpg", "loculy.jpg", "5-10", false, true, "");
leaderboard.addMatch("Mathieu", "Louis", "mmorue.jpg", "loculy.jpg", "10-2", true, true, "");
</script>

</html>
